{"version":3,"sources":["../src/isometricPointer.js"],"names":[],"mappings":"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","file":"isometricPointer.js","sourcesContent":["/*\nAn example of how to use a pointer to select isometric tiles.\n*/\n\n//Create a new Hexi instance, and start it.\nlet g = hexi(512, 512, setup);\n\n//Scale the canvas to the maximum browser dimensions\ng.scaleToWindow();\n\n//Declare variables used in more than one function\nlet world, message;\n\n//Start Hexi\ng.start();\n\nfunction setup() {\n\n  //Create the `world` container that defines our isometric \n  //tile-based world\n  world = g.group();\n\n  //Set the `tileWidth` and `tileHeight` of each tile, in pixels\n  world.cartTilewidth = 32;\n  world.cartTileheight = 32;\n\n  //Define the width and height of the world, in tiles\n  world.widthInTiles = 8;\n  world.heightInTiles = 8;\n\n  //Create the world layers\n  world.layers = [\n\n    //The environment layer. `2` represents the walls,\n    //`1` represents the floors\n    [\n      2, 2, 2, 2, 2, 2, 2, 2,\n      2, 1, 1, 1, 1, 1, 1, 2,\n      2, 1, 2, 1, 1, 2, 1, 2,\n      2, 1, 1, 1, 1, 2, 2, 2,\n      2, 1, 1, 1, 1, 1, 1, 2,\n      2, 2, 2, 1, 2, 1, 1, 2,\n      2, 1, 1, 1, 1, 1, 1, 2,\n      2, 2, 2, 2, 2, 2, 2, 2\n    ],\n\n    //The character layer. `3` represents the game character\n    //`0` represents an empty cell which won't contain any\n    //sprites\n    [\n      0, 0, 0, 0, 0, 0, 0, 0,\n      0, 0, 0, 0, 0, 0, 0, 0,\n      0, 0, 0, 0, 0, 0, 0, 0,\n      0, 0, 0, 0, 0, 0, 0, 0,\n      0, 0, 0, 0, 3, 0, 0, 0,\n      0, 0, 0, 0, 0, 0, 0, 0,\n      0, 0, 0, 0, 0, 0, 0, 0,\n      0, 0, 0, 0, 0, 0, 0, 0\n    ]\n  ];\n\n  //Build the game world by looping through each of the arrays\n  world.layers.forEach(layer => {\n\n    //Loop through each array element\n    layer.forEach((gid, index) => {\n\n      //If the cell isn't empty (0) then create a sprite\n      if (gid !== 0) {\n\n        //Find the column and row that the sprite is on and also\n        //its x and y pixel values.\n        let column, row, x, y;\n        column = index % world.widthInTiles;\n        row = Math.floor(index / world.widthInTiles);\n        x = column * world.cartTilewidth;\n        y = row * world.cartTileheight;\n\n        //Next, create a different sprite based on what its \n        //`gid` number is\n        let sprite;\n        switch (gid) {\n\n          //The floor\n          case 1:\n\n            //Create a sprite using an isometric rectangle\n            sprite = g.isoRectangle(world.cartTilewidth, world.cartTileheight, 0xCCCCFF);\n            //Cartesian rectangle:\n            //sprite = g.rectangle(world.cartTilewidth, world.cartTileheight, 0xCCCCFF);\n            break;\n\n            //The walls\n          case 2:\n            sprite = g.isoRectangle(world.cartTilewidth, world.cartTileheight, 0x99CC00);\n            //Cartesian rectangle:\n            //sprite = g.rectangle(world.cartTilewidth, world.cartTileheight, 0x99CC00);\n            break;\n\n            //The character  \n          case 3:\n            sprite = g.isoRectangle(world.cartTilewidth, world.cartTileheight, 0xFF0000);\n            //Cartesian rectangle:\n            //sprite = g.rectangle(world.cartTilewidth, world.cartTileheight, 0xFF0000);\n        }\n\n\n        //Add these properties to the sprite\n        g.addIsoProperties(sprite, x, y, world.cartTilewidth, world.cartTileheight);\n\n        //Set the sprite's `x` and `y` pixel position based on its\n        //isometric coordinates\n        sprite.x = sprite.isoX;\n        sprite.y = sprite.isoY;\n\n        //Cartesian positioning\n        //sprite.x = sprite.cartX;\n        //sprite.y = sprite.cartY;\n\n        //Add the sprite to the `world` container\n        world.addChild(sprite);\n      }\n    });\n  });\n\n  //Position the world inside the canvas\n  let canvasOffset = (g.canvas.width / 2) - world.cartTilewidth;\n  world.x += canvasOffset;\n  world.y = 150;\n\n  //Make a text object\n  message = g.text(\"\", \"16px Futura\", \"black\");\n  message.setPosition(5, 0);\n\n  //Add isometric properties to the pointer\n  g.makeIsoPointer(g.pointer, world)\n\n  //Set the game state to `play`\n  g.state = play;\n}\n\nfunction play() {\n  message.content = `\n    cartX: ${Math.floor(g.pointer.cartX)}\n    cartY: ${Math.floor(g.pointer.cartY)}\n    column: ${g.pointer.column} \n    row: ${g.pointer.row}\n    index: ${g.pointer.index}\n    layer 1 gid: ${world.layers[0][Math.floor(g.pointer.index)]}\n    layer 2 gid: ${world.layers[1][Math.floor(g.pointer.index)]}\n  `;\n\n}"]}